- content_for(:body_id, 'manage_flow')

%script#new_category_template{type: 'text/x-handlebars-template'}
  = render 'new_category'
%script#service_template{type: 'text/x-handlebars-template'}
  = render 'application_service_row', { presenter: JsonServiceRowPresenter.new() }
%script#category_archetype{type: 'text/x-handlebars-template'}
  = render 'category_panel', { presenter: JsonCategoryPresenter.new() }
:ruby
  crumbs = breadcrumbs_for(
    link_to("Manage", applications_path),
    @app.name
  )

%header.application
  = render '/shared/breadcrumbs', breadcrumbs: crumbs
  = render 'application_menu', app: @app

= render 'shared/notifications'

%section.deployment-details
  %span.deployment-env
    Deployed to: CoreOS Local
  - unless @app.host_ports.blank?
    - @app.host_ports.each do |service_name, ports|
      %span.service-url
        = "#{service_name} URL: "
        - ports.each do |port|
          %a{href: "http://127.0.0.1:#{port}/"}<>
            = "127.0.0.1:#{port}"

%section.application-services
  %header
    %h3
      Application Services
    %nav
      %a.list.selected= ''
      %a.relationship= ''
  .views
    .categories
      - @app.categorized_services.each do |group, services|
        = render 'category_panel', { presenter: CategoryPresenter.new(group, services) }
      .category-panel.add
        %header
          %span.title
            Add a Category
        %button.button-positive.add-category
    .relationships
      = render 'relationship_view', :app => @app

= render 'shared/journal', 
  title: 'CoreOS Journal - Application Activity Log',
  journal_path: journal_application_path(@app.id)

= render 'services/add_service'