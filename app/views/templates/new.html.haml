- content_for(:body_id, 'template_flow')

%h1 Save as Template
- if @user.github_access_token_present?
  %h3 Information retrieved from GitHub
  %dl
    %dt Username:
    %dd= @user.github_username
    %dt Email Address:
    %dd= @user.email

  = form_for @template_form, url: templates_path do |f|
    = render 'shared/errors', errors: f.object.errors
    %h3 Select a repository for your application template
    = f.select :repos, options_for_select(@user.repositories), {}, class: 'fancy'

    %h3 Add some information about your template to help others find it in search results

    %dl
      %dt= f.label :name, 'Template Name'
      %dd= f.text_field :name, placeholder: 'Give your template a name'

    = button_tag 'Publish Your Template', class: 'button-positive'

- else
  %h3 First, you'll need to create a github token
  %p
    Visit
    = link_to 'Generate a Github access token', 'https://github.com/settings/tokens/new?scope=repo,user:email', target: '_blank'

  = form_for @user, url: user_path, method: :put, html: { class: 'update-github-token' } do |f|
    %strong
      = f.label :github_access_token, 'Github Token'
    = f.text_field :github_access_token, placeholder: 'Paste your GitHub token here'
    = f.button 'Save Token', class: 'button-positive'
